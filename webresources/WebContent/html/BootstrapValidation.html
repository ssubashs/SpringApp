<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Testing</title>

<link rel="stylesheet" type="text/css" media="all" href="../css/jquery-ui.css">
    <link rel="stylesheet" type="text/css" media="all" href="../css/ecms.css">
    <link rel="stylesheet" type="text/css" media="all" href="../css/bootstrap-datetimepicker.min.css">
    
     <link rel="stylesheet" type="text/css" media="all" href="../css/tooltipster.css">
<!--[if gte IE 10]> -->
    <link rel="stylesheet" type="text/css" media="all" href="https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <!-- <![endif]-->
    <!--[if IE 9]>
        <html class="ie9">
            <link rel="stylesheet" type="text/css" media="all" href="https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <![endif]-->
    <!--[if lt IE 9]>
      <html class="ie8">
      <link rel="stylesheet" type="text/css" media="all" href="https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	 <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>	

</head>
<body>

<div id="content">

<form class="form-horizontal" id="testform" action="#" method="POST">

   <h4 class="text-center text-primary">Testing form validation</h4>   
   <div class="alert alert-danger text-center error-msg hidden" id="errorcontainer"></div>
              <div class="section-header subhead hidden-sm hidden-xs">
                <div class="row">
                  <div class="col-md-9">
                    Questions
                  </div>
                  <div class="col-md-1">
                    Yes
                  </div>
                  <div class="col-md-1">
                    No
                  </div>
                  <div class="col-md-1">
                    N/A
                  </div>
                </div>
              </div>
      <section>        
      <fieldset>        
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                   <span class="control-label">
                    Have you made or do you plan to make any changes or improvements to your home?</span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4" >
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox0" id="chkbox0" value="Yes" required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox0" id="chkbox0" value="No">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox0" id="chkbox0" value="N/A">
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
               </div>
              	
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                   <span class="control-label">
                    Do you own any jewelry, art, or collections valued at $500 or more. Do you own a Jet-Ski. ATV, or Snow Mobile?</span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox1" id="chkbox1" value="Yes" required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox1" id="chkbox1" value="No">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox1" id="chkbox1" value="N/A"  checked="checked">
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
               </div>
              	
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                  
                    <span class="control-label">  Is your liability insurance sufficient to cover your current net worth and future income against a catastrophic loss? </span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox2" id="chkbox2" value="Yes" required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox2" id="chkbox2" value="No" checked="checked">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox2" id="chkbox2" value="N/A">
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
               </div>
              	
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                   <span class="control-label">
                    Do you have any insurance policies with other carriers?</span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox3" id="chkbox3" value="Yes" required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox3" id="chkbox3" value="No" checked="checked">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox3" id="chkbox3" value="N/A">
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
               </div>
              	
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                   <span class="control-label">
                    Are there any new household members in your residence?</span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox4" id="chkbox4" value="Yes"  required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox4" id="chkbox4" value="No">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox4" id="chkbox4" value="N/A">
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
              </div> 
              	
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                   <span class="control-label">
                    Does anyone in your household own a business or work from home?</span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox5" id="chkbox5" value="Yes" required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox5" id="chkbox5" value="No">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox5" id="chkbox5" value="N/A" checked="checked">
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
               </div>
              	
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                   <span class="control-label">
                    In the last 5 years, have you or anyone in your household changed jobs?</span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox6" id="chkbox6" value="Yes" required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox6" id="chkbox6" value="No">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox6" id="chkbox6" value="N/A" checked="checked">
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
              </div> 
              	
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                   <span class="control-label">
                    If your spouse can no longer earn an income, do you know how you would replace it? </span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox7" id="chkbox7" value="Yes" required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox7" id="chkbox7" value="No" checked="checked">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox7" id="chkbox7" value="N/A" >
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
               </div>
              	
              
              <div class="rows-striped">
                <div class="row question">
                  <div class="col-md-9">
                  <span class="control-label">
                    Do you know how much money you need to retire and are you currently on pace? </span>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox8" id="chkbox8" value="Yes" required>
                        <span class="hidden-md hidden-lg">Yes</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox8" id="chkbox8" value="No">
                        <span class="hidden-md hidden-lg">No</span>
                      </label>
                    </div>
                  </div>
                  <div class="col-md-1 col-sm-2 col-xs-4">
                    <div class="radio">
                      <label>
                        <input type="radio" name="chkbox8" id="chkbox8" value="N/A">
                        <span class="hidden-md hidden-lg">N/A</span>
                      </label>
                    </div>
                  </div>
                </div> <!-- ./question -->
               </div>
       </fieldset>
       </section>
       <section>
        <div class="form-group">
             <div class="col-md-12 checkbox">
               <label class="checkbox-inline">
                 <input type="checkbox" value="">
                 Send 'Thank You' eMail <a data-toggle="modal" data-target="#thankyou-preview" href="#thankyou-preview" class="">(Preview)</a>
               </label>
             </div>
         </div>
       
        
        		<div id="addtl-search-options" id="additional_accountstatus">
							<div class="form-group">
								<label for="accountStatus" class="control-label">
									Account Status: </label> 
									<select multiple="multiple"
									class="form-control multiselect" id="accountStatus"
									name="accountStatus" required>
									<option value="AS_ALL">ALL</option>
									<option value="one">One</option>
									<option value="one">Two</option>
									<option value="one">Three</option>
									</select>
							</div>
				</div>
							
       
        </section>
         <section>
          <div class="row">
            <div class="col-md-6 form-group" id="comment-title">            
              <h3 class="title"> Add a Comment </h3>
              <span id="comment-validations"></span>
              <textarea  id="comment" name="comment" class="form-control textarea-expand" rows="4" maxlength="20"></textarea>           
            </div>
            <div class="col-md-6">
              <h3 class="title">
                <a data-toggle="collapse" data-parent="" href="#past-appt-task"><i class="fa fa-sm fa-fw fa-chevron-right"></i></a> Past Appointments & Tasks (3)
              </h3>
              <div id="past-appt-task" class="collapse">
                <ul class="list-group">
                  <li class="list-group-item">
                    <span class="fa fa-calendar"></span> Thu Nov 6, 2014 10:00 PM
                  </li>
                  <li class="list-group-item">
                    <span class="fa fa-check-square-o"></span> Wed Nov 5, 2014 9:30 AM 
                  </li>
                  <li class="list-group-item">
                    <span class="fa fa-calendar"></span> Mon Nov 3, 2013 2:30 PM
                  </li>
                  <li class="list-group-item text-right">
                    <a href="javascript:void(0)" class="btn btn-link btn-lg btn-more">More <span class="fa fa-angle-double-right"></span></a>
                  </li>
                </ul>
              </div><!-- /#past-appt-task-->
            </div> 
          </div> <!-- /.row -->
        </section> 
        
       
               
	<div class="row">
        <div class="col-md-12">
          <div class="navbar-fixed-bottom sticky-menu">
            <button type="button" class="btn btn-sm btn-default"><span class="fa fa-file-pdf-o fa-2x"></span><span class="hidden-xs visible-sm-block visible-md-inline visible-lg-inline"> View FFR</span></button>
            <button type="button" class="btn btn-sm btn-default"><span class="fa fa-envelope-o fa-2x"></span><span class="hidden-xs visible-sm-block visible-md-inline visible-lg-inline"> Email FFR</span></button>
           <!--   <a href="#app_task_modal" role="button" class="btn btn-sm btn-default" data-toggle="modal" ><span class="fa fa-calendar fa-2x"></span><span class="hidden-xs visible-sm-block visible-md-inline visible-lg-inline"> Schedule Appointment</span></a>-->
            <button id="appointment" type="button" class="btn btn-sm btn-default" ><span class="fa fa-calendar fa-2x"></span><span class="hidden-xs visible-sm-block visible-md-inline visible-lg-inline"> Schedule Appointment</span></button>
            <button type="button" class="btn btn-sm btn-default"><span class="fa fa-check-square-o fa-2x"></span><span class="hidden-xs visible-sm-block visible-md-inline visible-lg-inline"> Schedule Task</span></button>
            <button type="reset" class="btn btn-sm btn-link"><span class="fa fa-trash fa-2x"></span><span class="hidden-xs visible-sm-block visible-md-inline visible-lg-inline"> Clear Form</span></button>
            <button type="submit" id="save" class="btn btn-danger pull-right"><span class="fa fa-save fa-2x"></span><span class="hidden-xs visible-sm-block visible-md-inline visible-lg-inline"> Save FFR</span></button>
          </div>
         </div> 
     </div><!-- /.row -->
<!-- 
	<div class="container-fluid">
	     <div class="row">
	       <div class="col-md-6">
	         <div class='input-group date' id='test-datetime'>
	           <input type='text' id="testinput-datetime" class="form-control" />
	           <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
	           
                </span>
	          
	         </div>
	         <div class="input-group hidden">
	           <input type='text' class="form-control" id="apptEndDateMM"/>
	           <input type='text' class="form-control" id="apptEndDateDD"/>
	           <input type='text' class="form-control" id="apptEndDateYYYY"/>
	           <input type='text' class="form-control" id="apptEndTime"/>
	           <input type='text' class="form-control" id="apptEndTimeMinute"/>
	           <select name="apptEndTimeAMPM" size="1">
	             <option value=""></option>
	             <option value="AM">AM</option>
	             <option value="PM">PM</option>
	           </select>
	         </div>
	       </div>
	     </div>
	</div>
 -->
</form>
	
	
 <!-- Thank You Email Preview Modal -->
      <div class="modal fade" id="app_task_modal" tabindex="-1" role="dialog" aria-labelledby="thankyou-label" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
              <h4 class="modal-title title" id="thankyou-label">eFFR - 'Thank you' eMail Preview</h4>
            </div>
            <div class="modal-body">
              
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-info" data-dismiss="modal"><span class="fa fa-times"></span> Close</button>
            </div>
          </div>
        </div>
      </div><!-- /.modal #thankyou-preview -->	
</div>

   
  <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.js"></script>
  <script src="../js/moment.min.js"></script> 
  <script src="../js/bootstrap-datetimepicker.min.js"></script>  
  <script src="../js/bootstrap-maxlength.js"></script>  
  <script src="../js/jquery.tooltipster.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/bootstrap-multiselect.js"></script>
  <script src="../js/bootstrap-alert.js"></script>
	<script type="text/javascript">
	$(function(){
					console.log('document ready');
					 $("#app_task_modal").bind('contentchanged',"#task-start", function () {
						 console.log('contentchanged app_task_modal');
					       $(this).datetimepicker();
					    });
					 
					 $("#app_task_modal").bind('DOMNodeInserted', function(event) {
						 console.log('DOMNodeInserted for app_task_modal');
						 $("#task-start").datetimepicker( 
								 {
									 autoclose: true,
									 todayHighlight: true,
									 pickTime: false
									    
								 });
					});
					 
	});
	console.log('loaded the javascript for mobileffr ');
	var formcontainer = $('#testform');
	
	$('textarea#comment').maxlength({
	    alwaysShow: true
	});
	
	/*
	$(function () {
        $('#test-datetime').datetimepicker();
    });
	*/
	
	
	
	/*
	jQuery.validator.setDefaults({
	    debug: true,
	    success: "valid",
		submitHandler: function(form) {
	    console.log('form submit hijacked');
	}
	}); 
	
	
	formcontainer.validate();
	$('#save').click(function(){
		  console.log('save invoked');
		  testform.submit();
		});
		
	*/
	
	
	
	
	formcontainer.validate({
		  submitHandler: function(form) {
		    // other form related stuff
			console.log('submit invoked successfully');  
			//$("#errorcontainer").addClass("hidden");
		    
		  },
		  rules:{
			  comment:{
				  maxlength:20
			  }
			  
		  },
		  messages:{
			  comment:"Restrict comment to less than 2000 characters",
			  
		  },
		  invalidHandler: function(event, validator) {
			    // 'this' refers to the form
			    var errors = validator.numberOfInvalids();
			    if (errors) {
			      var message =  '<i class="fa fa-exclamation-triangle fa-lg"></i> Please correct all the errors !';		       
			      $("#errorcontainer").html(message);
			      $("#errorcontainer").removeClass("hidden");
			    } 
			    else {
				      $("#errorcontainer").addClass("hidden");
				    }
			  },
		  errorPlacement: function(error, element) 
		    {
			  /*
		        if ( element.is(":radio") ) 
		        {
		        	var parentdiv = $(element).closest('.rows-striped').get(0);
		        	console.log('error on bs radio :: '+$(parentdiv).html());
		      //  	$(parentdiv).addClass("has-error")
		        		            
		        }
		        */
		        //return false;
		        console.log('error placement');
		        if ($(element).attr("name") == "comment")
	        	{
		        	$("#comment-validations").html(error);
	        	}
		        
		    },
		    highlight: function(element, errorClass, validClass){
		    	try{
		    	
		    		console.log(element);
		    	
		    	if ($(element).attr("type") == "radio") {
		        	$(element).parents(".rows-striped").addClass("has-error");
		    	}
		    	else if($(element).attr("multiple") == "multiple")
		    		{
			    		var parentdiv = $(element).closest('.form-group').get(0);
			        	console.log('error on bs radio :: '+$(parentdiv).html());
			        	if(!$(parentdiv).hasClass('has-error'))
			        		$(parentdiv).addClass('has-error');
		    		}
		    	
		    	else if ($(element).attr("name") == "comment")
		    		{		    			
		    			
		    			var parentdiv = $(element).closest('.form-group').get(0);
			        	console.log('error on bs radio :: '+$(parentdiv).html());
			        	if(!$(parentdiv).hasClass('has-error'))
			        		$(parentdiv).addClass('has-error');
			        	
		    		}
		    	}
		    	catch(e)
		    	{
		    		console.log("error");
		    		console.log( e);
		    	}
		      	
		      	
		        		
		      
	        	
	        		
	        	
		    },
		    
		    unhighlight: function(element, errorClass, validClass) {
		    	var correcteddiv = $(element).closest('.has-error').get(0);
		    	
		    	
		    	 if ($(correcteddiv).hasClass("has-error"))
		        		$(correcteddiv).removeClass('has-error');
		    },
		    success: function (label, element) 
	        {
		    	console.log('form is error free');
	            
	        },
	        errorContainer: "#errorcontainer"
	        
		});
		
	
	$('#appointment').click(function(e){
		  console.log('appointment invoked');
		  e.preventDefault();
		  if(formcontainer.valid())
			{
					  
			  var url = "../html/DynamicContent.html";
			  console.log('url to submit'+ url);
			  //formcontainer.attr('action', url).submit();
			  //showpopup(url);
			  console.log('form valid ready for submission');
			  $.get(url, function(response) {
					 $("#app_task_modal .modal-body").html(response);					 
					 $('#app_task_modal').modal();
					
					 
					 //$('#task-start').datepicker();
					 
					 /*
					  if ($('#task-start').is(':visible')) {
					        $(function () {
					            $('#task-start').datetimepicker();
					        });
					        $(function () {
					            $('#task-end').datetimepicker();
					        });
					    }
					 */
			  });
			  
			  
		  }
		  else{
				console.log('error in form :: correct the errors');
		  }
		  
		});
	
	  $('#app_task_modal').on("click","#task-start" ,function () {
		  console.log('clicked the date change');
          dateText = $(this).find('input').val();
          populateHidden(dateText);
          if (dateText.indexOf('AM') >= 0) {
            $(this).next('.hidden').find('select>option:eq(1)').prop('selected', true);
          } else if (dateText.indexOf('PM') >= 0) {
            $(this).next('.hidden').find('select>option:eq(2)').prop('selected', true);
          }
          $('.hidden').removeClass('hidden');
      });
      function populateHidden(data) {
    	  if(data =='')
          dateTime = data.split(' ');
          var date = dateTime[0].split("/");
          var time = dateTime[1].split(":");
          var ampm = dateTime[2];
          $("#apptEndDateMM").val(date[0]);
          $("#apptEndDateDD").val(date[1]);
          $("#apptEndDateYYYY").val(date[2]);
          $("#apptEndTime").val(time[0]);
          $("#apptEndTimeMinute").val(time[1]);

      }

</script>

</body>
</html>